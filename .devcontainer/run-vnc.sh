#!/bin/bash\nset -e\n\n# Start X virtual framebuffer\nexport DISPLAY=:1\nif pgrep Xvfb >/dev/null 2>&1; then\n  echo "Xvfb already running"\nelse\n  Xvfb $DISPLAY -screen 0 1280x720x24 >/tmp/xvfb.log 2>&1 &\n  sleep 1\nfi\n\n# Start a lightweight window manager\nif pgrep fluxbox >/dev/null 2>&1; then\n  echo "fluxbox already running"\nelse\n  fluxbox >/tmp/fluxbox.log 2>&1 &\n  sleep 1\nfi\n\n# Start x11vnc to expose the X display\nif pgrep x11vnc >/dev/null 2>&1; then\n  echo "x11vnc already running"\nelse\n  x11vnc -display $DISPLAY -nopw -forever -shared -rfbport 5900 >/tmp/x11vnc.log 2>&1 &\n  sleep 1\nfi\n\n# Start noVNC proxy (web-based VNC) on port 6080\nif [ -d "/opt/noVNC" ]; then\n  if pgrep -f "novnc_proxy" >/dev/null 2>&1; then\n    echo "noVNC proxy already running"\n  else\n    /opt/noVNC/utils/novnc_proxy --vnc localhost:5900 --listen 6080 >/tmp/novnc.log 2>&1 &\n  fi\nelse\n  echo "noVNC not found at /opt/noVNC"\nfi\n\necho "noVNC available at http://localhost:6080 (forwarded), VNC port 5900."\n\ntouch /tmp/run-vnc-done